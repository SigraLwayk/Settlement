# js/monado.js 設計

## 役割
施設データを元にテーブルを生成し、年間収支を計算して行に反映するメインロジック。

## 主な処理
1. `tbody` を初期化し、各施設の行を生成。
2. 入力値とサイクル日数から年間生産量を算出。
3. `productMap` で資源ごとの年間総量を集計し、収支セルに表示。
4. 収支量に応じて行にクラスを付与し色分けする。

### 処理フロー詳細
1. `tbody.innerHTML` を空にして以前の行を全て削除。
2. `productMap` を初期化して生産量／消費量を格納する準備を行う。
3. `facilitiesData` を走査し、各施設について以下を実行。
   - ローカルストレージから施設数を取得（未保存時は 0）。
   - `total` を `施設数 × (360 / cycleDays) × productCount` で求める。
   - `productUpdater()` を用いて生産物と使用資源を `productMap` に加算。
   - `Func.renderCell()` を利用して行用の HTML を組み立て `tbody` へ追加。
4. 行生成後、テーブルの各行を再度走査。
   - プロダクト名をキーとして `productMap` から年間収支を取得しセルへ設定。
   - 収支値に応じて `morePositive`、`positive`、`negative` クラスを付与。

## 拡張ポイント
計算式の変更や表示項目追加時に編集する。
